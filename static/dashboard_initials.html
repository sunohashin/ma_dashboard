<script>
// Add this debugging function
function logApiResponses() {
  console.log("Debugging API responses:");

  // Debug staff API
  fetch('/api/staff')
    .then(response => response.json())
    .then(data => {
      console.log("Staff API response:", data);
    })
    .catch(error => console.error("Staff API error:", error));

  // Debug time_off API for today
  const today = new Date().toISOString().split('T')[0];
  fetch(`/api/time_off?from=${today}&to=${today}`)
    .then(response => response.json())
    .then(data => {
      console.log("Time Off API response:", data);
    })
    .catch(error => console.error("Time Off API error:", error));

  // Debug presence API with a few employee IDs if available
  window.setTimeout(() => {
    if (employeeData && employeeData.length > 0) {
      const sampleIds = employeeData.slice(0, 3).map(emp => emp.ownId);
      const params = new URLSearchParams();
      sampleIds.forEach(id => params.append('ownIds[]', id));

      fetch(`/api/presence?${params.toString()}`)
        .then(response => response.json())
        .then(data => {
          console.log("Presence API response for sample IDs:", data);
        })
        .catch(error => console.error("Presence API error:", error));
    }
  }, 1000);
}

// Call the debug function after the page loads
window.addEventListener('DOMContentLoaded', logApiResponses);
</script>
</body>
